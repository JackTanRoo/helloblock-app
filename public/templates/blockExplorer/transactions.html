<subnav selected="'transactions'" global="global"></subnav>
<div class="centerpiece-alt text-center">
  <div class="container">
    <form ng-submit="bigSearch.query(transaction.tx_hash)">
      <div class="input-group">
          <input
            class='h3 big-input'
            spellcheck="false"
            name="query"
            ng-model="transaction.tx_hash"
            >
          <span class="input-group-btn">
            <button class="btn btn-success btn-block btn-search">
              <span class="h2">SEARCH</span>
            </button>
          </span>
      </div>
    </form>
  </div>
</div>
<div class="container">
  <br>
  <div class="h1 text-center">
    TRANSACTION:
  </div>
  <br>
  <waitspin ng-show="!transaction.tx_hash"></waitspin>
  <div class="row" ng-show="transaction.tx_hash">
    <div class="h3 text-center text-gray">
      SUMMARY
    </div>
    <span class="pull-right view-json">
      <a href='#'>View as JSON</a>
    </span>
    <br>
    <div class="row">
      <div class="col-md-12 table-tight">
        <table class="table table-bordered table-summary table-overview">
          <tbody>
            <tr>
              <td>Transaction Hash: </td>
              <td>{{transaction.tx_hash}}</td>
            </tr>
            <tr>
              <td>Block Hash: </td>
              <td>{{transaction.block_hash}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="col-md-6">
      <table class="table table-bordered table-summary">
        <tr>
          <td>Block Height: </td>
          <td><a href="/testnet/blocks/{{transaction.block_height}}">{{transaction.block_height}}</a></td>
        </tr>
        <tr>
          <td>Received Time: </td>
          <td utc="{{transaction.estimated_time}}"></td>
        </tr>
        <tr>
          <td>Confirmations: </td>
          <td>
            <span class="label" verbose="true" confirmations="{{transaction.confirmations}}"></span>
          </td>
        </tr>
        <tr>
          <td>Size: </td>
          <td>{{transaction.tx_size}} KB</td>
        </tr>
      </table>
    </div>
    <div class="col-md-6">
      <table class="table table-bordered table-summary">
        <tr>
          <td>Total Inputs: </td>
          <td to-btc="{{transaction.total_inputs_value}}"></td>
        </tr>
        <tr>
          <td>Total Outputs: </td>
          <td to-btc="{{transaction.total_outputs_value}}"></td>
        </tr>
        <tr>
          <td>Fees: </td>
          <td to-btc="{{transaction.fees}}"></td>
        </tr>
      </table>
    </div>
  </div>
  <br><br>
</div>
<div class="wide-container">
  <div class="h3 text-center text-gray">
    INPUTS/OUTPUTS
  </div>
  <table class="table table-transactions table-transactions-lg">
    <tr>
      <td class='no-top'>
      <br>
      <div class="col-md-5">
        <div class="text-center" ng-show="transaction.in[0].prev_out.tx_hash === null">
          <br>
          <span class="h3">NEWLY GENERATED COINS</span>
        </div>
        <table
          ng-repeat="i in transaction.in"
          ng-show="i.prev_out.tx_hash !== null"
          class="
            table table-bordered table-io"
          >
          <tbody>
            <tr>
              <td>Address: </td>
              <td>
                <img
                  ng-src="https://identicoin.herokuapp.com/address/{{i.prev_out.address}}"
                  width="16">
                <span><a href="/testnet/addresses/{{i.prev_out.address}}">{{i.prev_out.address}}</a></span>
              </td>
            </tr>
            <tr>
              <td>
                Amount:
              </td>
              <td>
                <span class="label label-default">SPENT</span>
                <span class="amount" to-btc="{{i.prev_out.value}}"></span>
              </td>
            </tr>
            <tr>
              <td>n (index): </td>
              <td>
                <span>
                  <a href="/testnet/transactions/{{i.prev_out.tx_hash}}?n={{i.prev_out.n}}">
                    {{i.prev_out.n}}
                  </a>
                </span>
              </td>
            </tr>
            <tr>
              <td>
                TX Hash:
              </td>
              <td class='break'>
                <span class="amount break">
                  <a href="/testnet/transactions/{{i.prev_out.tx_hash}}?n={{i.prev_out.n}}">
                    {{i.prev_out.tx_hash}}
                  </a>
                </span>
              </td>
            </tr>
            <tr>
              <td class='text-center'>ScriptSig: </td>
              <td class='break'>
                <span>{{i.scriptSig}}</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-2 text-center">
        <br>
        <i class="fa fa-arrow-circle-right fa-4x text-gray-light"></i>
      </div>
      <div class="col-md-5 addresses">
        <table
          ng-repeat="o in transaction.out"
          class="table table-bordered table-io"
          ng-class="{'table-highlighted': transaction.n === o.n}">
          <tbody>
            <tr>
              <td>n (index): </td>
              <td><span>{{o.n}}</span></td>
            </tr>
            <tr>
              <td>Address: </td>
              <td>
                <img src="https://identicoin.herokuapp.com/address/{{o.address}}" width="16">
                <span><a href="/testnet/addresses/{{o.address}}">{{o.address}}</a></span>
              </td>
            </tr>
            <tr>
              <td>
                Amount:
              </td>
              <td>
                <span class="label" spent="{{o.spent}}"></span>
                <span class="amount" to-btc="{{o.value}}"></span>
              </td>
            </tr>
            <tr>
              <td rowspan="1">scriptPubKey: </td>
              <td class="break">
                <span>
                  {{o.scriptPubKey}}
                </span>
              </td>
            </tr>
            <!-- <tr>
              <td>
                <span>
                  TODO: Parsed
                </span>
              </td>
            </tr> -->
          </tbody>
        </table>
      </div>
      </td>
    </tr>
  </table>
</div>
